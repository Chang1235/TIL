# 1. **DBMSì™€ SQL**

**1) DBMS(Database Management System)**

ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê³  íš¨ê³¼ì ìœ¼ë¡œ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ DBMSë¥¼ ì‚¬ìš©í•œë‹¤.

ê°€ì¥ ë„ë¦¬ ì•Œë ¤ì§„ DBMSë¡œëŠ” ì˜¤ë¼í´ì—ì„œ ë§Œë“  Oracleê³¼ MySQLì´ ìˆë‹¤.

# 2. **SQL(Structured Query Language)**

SQLì€ DBMSê°€ ì½ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë…ë¦½ì ì¸ ì–¸ì–´ë‹¤.

DBMSì™€ ëŒ€í™”í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ SQLì„ í•™ìŠµí•´ì•¼ í•œë‹¤.

**1) SQL ì¢…ë¥˜**

[ì œëª© ì—†ìŒ](https://www.notion.so/da654cb0207346d4b15273bfff9fa1f2)

**2) DDL(Data Definition Language)**

DDLì€ ì‚¬ì „ì  ì˜ë¯¸ ê·¸ëŒ€ë¡œ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ê³µê°„ì„ ì •ì˜í•˜ëŠ” ì–¸ì–´ë‹¤.

```sql
CREATE TABLE STUDENT {
STUDENT_NOÂ Â Â Â  VARCHAR(10)Â Â Â Â  PRIMARY KEY,
NAMEÂ Â Â Â Â Â Â Â Â Â Â Â Â  VARCHAR(50)Â Â Â Â  NOT NULL,
SCOREÂ Â Â Â Â Â Â Â Â Â Â Â Â  NUMBER(3),
MAJORÂ Â Â Â Â Â Â Â Â Â Â Â  VARCHAR(100)Â Â Â  NOT NULL
);
```

í…Œì´ë¸”ì— í¬í•¨ë  ì»¬ëŸ¼ì€ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¡œ ë“±ë¡í•œë‹¤.

```sql
ì»¬ëŸ¼ì´ë¦„ ë°ì´í„°íƒ€ì…(ë°ì´í„°í¬ê¸°) ì œì•½ì¡°ê±´
```

**3) DML(Data Manipulation Language)**

**(1) ë°ì´í„° ë“±ë¡** 

```sql
INSERT INTO í…Œì´ë¸”ì´ë¦„(ì»¬ëŸ¼ëª©ë¡) VALUES(ê°’ëª©ë¡);
```

<aside>
ğŸ’¡ **INSERT êµ¬ë¬¸ì—ì„œì˜ ì£¼ì˜ì‚¬í•­

1. ì¹¼ëŸ¼ëª©ë¡ê³¼ ê°’ëª©ë¡ì˜ ê°œìˆ˜ê°€ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼í•œë‹¤.
2. ì¹¼ëŸ¼ëª©ë¡ê³¼ ì„¤ì •ë˜ëŠ” ê°’ëª©ë¡ì˜ íƒ€ì…ë„ ì¼ì¹˜í•´ì•¼í•œë‹¤.
3. ìˆ«ìë°ì´í„°ëŠ” ê·¸ëƒ¥ ì„¤ì •í•´ë„ ë˜ì§€ë§Œ ë¬¸ì ë°ì´í„°ëŠ” ë°˜ë“œì‹œ í™‘ë”°ì˜´í‘œ(â€™)ë¡œ ê°ì‹¸ì•¼ í•œë‹¤.**

</aside>

> ëª¨ë“  ì¹¼ëŸ¼ì— ê°’ì„ ì…ë ¥í•˜ëŠ” ê²½ìš° ì»¬ëŸ¼ëª©ë¡ì€ ìƒëµí•  ìˆ˜ ìˆë‹¤.
> 

**(2) ë°ì´í„° ìˆ˜ì •**

```sql
UPDATE í…Œì´ë¸”ì´ë¦„ SET ì»¬ëŸ¼ì´ë¦„ = ìˆ˜ì •ê°’, ì»¬ëŸ¼ì´ë¦„ = ìˆ˜ì •ê°’;
```

<aside>
ğŸ’¡ **ì£¼ì˜ ì‚¬í•­

1. ìˆ˜ì •í•  ì¹¼ëŸ¼ì´ ì—¬ëŸ¬ ê°œ ì¸ ê²½ìš° ì½¤ë§ˆ(,)ë¥¼ í†µí•´ êµ¬ë¶„í•˜ë©°, ë§ˆì§€ë§‰ ì¹¼ëŸ¼ë’¤ì—ëŠ” ì½¤ë§ˆë¥¼ ì°ì§€ ì•ŠëŠ”ë‹¤.
2. íŠ¹ì •í•œ ê°’ë§Œ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” WHERE ì¡°ê±´ì„ ì¶”ê°€í•´ì•¼í•œë‹¤.**

</aside>

**(3) ë°ì´í„° ì‚­ì œ**

```sql
DELETE í…Œì´ë¸”ì´ë¦„;
```

<aside>
ğŸ’¡ **ì£¼ì˜ì‚¬í•­

1. DELETEë„ UPDATEì™€ ë§ˆì°¬ê°€ì§€ë¡œ WHERE ì¡°ê±´ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì§€ì •ëœ í…Œì´ë¸”ì˜ ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œëœë‹¤**

</aside>

**4) DQL(Data Query Language)**

í…Œì´ë¸”ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê¸° ìœ„í•´ì„œëŠ” SELECTë¬¸ì„ ì‚¬ìš©í•˜ë©° ì¿¼ë¦¬(Query)ë¼ê³  í•œë‹¤.

**(1) ì¿¼ë¦¬ ê¸°ì´ˆ**

```sql
SELECT ì»¬ëŸ¼ì´ë¦„, ì»¬ëŸ¼ì´ë¦„, â€¦
FROM í…Œì´ë¸”ì´ë¦„
WEHRE ì œì•½ì¡°ê±´;
```

# 3. JDBC(Java Databas Connectivity)

**1) JDBC ê°œë…**

JDBC APIê°€ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„(implements)í•œ í´ë˜ìŠ¤ë¥¼ JDBC ë“œë¼ì´ë²„ë¼ê³  í•œë‹¤.
JDBC ë“œë¼ì´ë²„ëŠ” jarí˜•íƒœì˜ ì••ì¶•íŒŒì¼ë¡œ ì œê³µë˜ë©°, DBMSë¥¼ ì œê³µí•˜ëŠ” íšŒì‚¬ì˜ í™ˆí˜ì´ì§€ì—ì„œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆë‹¤

**2) JDBC í”„ë¡œê·¸ë¨ ì ˆì°¨**

**(1) 1ë‹¨ê³„ : ë“œë¼ì´ë²„(Driver) ê°ì²´ ìƒì„± ë° ë“±ë¡**

**(2) 2ë‹¨ê³„ : ì»¤ë„¥ì…˜(Connection) ì—°ê²°**

**(3) 3ë‹¨ê³„ : PreparedStatement ìƒì„±**

**(4) 4ë‹¨ê³„ : SQL ì „ì†¡**

**(5) 5ë‹¨ê³„ : ì—°ê²° í•´ì œ**

```java
package chapter12;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import org.h2.Driver;

public class InsertTest {

	public static void main(String[] args) {
		Connection conn = null ;
		PreparedStatement stmt = null;
		
		try {
			// 1ë‹¨ê³„ : ë“œë¼ì´ë²„ ê°ì²´ ë¡œë”©
			DriverManager.registerDriver(new Driver());
			
			// 2ë‹¨ê³„ : H2ì™€ ì»¤ë„¥ì…˜(ê³ ì†ë„ë¡œ) ì—°ê²°
			conn = DriverManager.getConnection("jdbc:h2:tcp://localhost/~/test", "sa", "");
			if(conn != null) {
				System.out.println("ì»¤ë„¥ì…˜ ê°ì²´ì˜ ì •ë³´: " + conn.toString());
			}
			
			// 3ë‹¨ê³„ : ìŠ¤í…Œì´íŠ¸ë¨¼íŠ¸(ê³ ì†ë²„ìŠ¤) ìƒì„±   (?ë¡œ ì²´í¬í•˜ë©´ ì„±ëŠ¥í–¥ìƒì— ë„ì›€ì´ ëœë‹¤)
			String sql = "insert into student(student_no, name, score, major)"
			+  "values(?, ?, ?, ?)";
			
			stmt = conn.prepareStatement(sql);
			
			// SQL íŒŒë¼ë¯¸í„°(?)ì— ê°’ ì„¤ì •
			stmt.setString(1, "STD-000015");
			stmt.setString(2, "");
			stmt.setInt(3, 98);
			stmt.setString(4, "ì»´í“¨í„°ê³µí•™");
			
			// 4 ë‹¨ê³„ : SQL ì „ì†¡      
			int count = stmt.executeUpdate();
			System.out.println(count + "ê±´ì˜ ë°ì´í„°ê°€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
			
			
		} catch (SQLException e) {
			// ì–´ëŠ í´ë˜ìŠ¤ì˜ ì–´ëŠ ë©”ì†Œë“œì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆëŠ”ì§€ ì¶”ì í•´ì„œ ê·¸ ìœ„ì¹˜ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.
			e.printStackTrace();
		}finally {
			//ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ì´ ëë‚˜ë©´ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë˜ê¸° ì „ì— ë°˜ë“œì‹œ ì»¤ë„¥ì…˜ì„ ëŠì–´ì•¼ í•œë‹¤.
			// ë”°ë¡œ try í•˜ëŠ” ì´ìœ : ê³ ì†ë²„ìŠ¤ë¥¼ ì œê±°í•˜ë‹¤ê°€ ì˜¤ë¥˜ê°€ ë‚˜ë©´ ê³ ì†ë„ë¡œëŠ” ì œê±°ê°€ ì•ˆë˜ê¸° ë•Œë¬¸ì—.
			try {
				stmt.close(); // ê³ ì†ë²„ìŠ¤ ì œê±°
			} catch (SQLException e) {
				e.printStackTrace();
			}
			try {
				conn.close(); // ê³ ì†ë„ë¡œ ì œê±°
			} catch (SQLException e) {
				e.printStackTrace();
			}
			
			System.out.println("í”„ë¡œê·¸ë¨ ì¢…ë£Œ");
		}
	}

}
```

**3) JDBCë¥¼ ìœ„í•œ Utility ì‚¬ìš©**

3 ë‹¨ê³„ë¥¼ ì œì™¸í•˜ê³¤ ê²¹ì¹˜ëŠ” ë¶€ë¶„ì´ ë§ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ê°„ê²°í™”í•œë‹¤.

**(1) JDBC Utility í´ë˜ìŠ¤ ì‘ì„±**

```java
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

public class JDBCUtil {
	
	public static Connection getConnection() {
		Connection conn = null;
		try {
			// JDBC 1ë‹¨ê³„ : ë“œë¼ì´ë²„ ê°ì²´ ë¡œë”©			
			DriverManager.registerDriver(new org.h2.Driver());
			
			// JDBC 2ë‹¨ê³„ : ì»¤ë„¥ì…˜ ì—°ê²°
			String jdbcUrl = "jdbc:h2:tcp://localhost/~/test";
			conn = DriverManager.getConnection(jdbcUrl, "sa", "");
		} catch (SQLException e) {
			e.printStackTrace();
		}
		return conn;
	}
	
	public static void close(PreparedStatement stmt, Connection conn) {
		// JDBC 5ë‹¨ê³„ : ì—°ê²° í•´ì œ
		try {
			stmt.close();
		} catch (SQLException e) {
			e.printStackTrace();
		}
		
		try {
			conn.close();
		} catch (SQLException e) {
			e.printStackTrace();
		}
	}
}
```

**(2) JDBCUtilì„ ì´ìš©í•œ INSERT**

```java
package chapter12;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import org.h2.Driver;

public class InsertTest {

	public static void main(String[] args) {
		Connection conn = null ;
		PreparedStatement stmt = null;
		
		try {
			conn = JDBCUtil.getConnection()		;
			// 3ë‹¨ê³„ : ìŠ¤í…Œì´íŠ¸ë¨¼íŠ¸(ê³ ì†ë²„ìŠ¤) ìƒì„±   (?ë¡œ ì²´í¬í•˜ë©´ ì„±ëŠ¥í–¥ìƒì— ë„ì›€ì´ ëœë‹¤)
			String sql = "insert into student(student_no, name, score, major)"
			+  "values(?, ?, ?, ?)";
			
			stmt = conn.prepareStatement(sql);
			
			// SQL íŒŒë¼ë¯¸í„°(?)ì— ê°’ ì„¤ì •
			stmt.setString(1, "STD-000015");
			stmt.setString(2, "ì±„ê·œíƒœ");
			stmt.setInt(3, 98);
			stmt.setString(4, "ì»´í“¨í„°ê³µí•™");
			
			// 4 ë‹¨ê³„ : SQL ì „ì†¡      
			int count = stmt.executeUpdate();
			System.out.println(count + "ê±´ì˜ ë°ì´í„°ê°€ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
			
			
		} catch (SQLException e) {
			// ì–´ëŠ í´ë˜ìŠ¤ì˜ ì–´ëŠ ë©”ì†Œë“œì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆëŠ”ì§€ ì¶”ì í•´ì„œ ê·¸ ìœ„ì¹˜ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.
			e.printStackTrace();
		}finally {
			JDBCUtil.close(stmt, conn);
			System.out.println("í”„ë¡œê·¸ë¨ ì¢…ë£Œ");
		}
	}

}
```

**4) ë°ì´í„° ì¡°íšŒ (SELECT)**

ìë°” í”„ë¡œê·¸ë¨ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¡°íšŒí•œ SELECT ê²°ê³¼ë¥¼ ë°›ê¸° ìœ„í•´ì„œëŠ” ResultSetì´ë¼ëŠ” ìƒˆë¡œìš´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ResultSetì´ ë“¤ì–´ê°€ê²Œ close ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¡œë”©í•œë‹¤.

```java
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class JDBCUtil {
	
	public static Connection getConnection() {
		~ ìƒëµ ~
	}
	
	public static void close(PreparedStatement stmt, Connection conn) {
		~ ìƒëµ ~
	}
	
	public static void close(ResultSet rs, PreparedStatement stmt, 
	Connection conn) {
		// JDBC 5ë‹¨ê³„ : ì—°ê²° í•´ì œ
		try {
			rs.close();
		} catch (SQLException e) {
			e.printStackTrace();
		}
		
		try {
			stmt.close();
		} catch (SQLException e) {
			e.printStackTrace();
		}
		
		try {
			conn.close();
		} catch (SQLException e) {
			e.printStackTrace();
		}
	}
}
```

```java
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class SelectTest1 {

	public static void main(String[] args) {
		// JDBC ê´€ë ¨ ë³€ìˆ˜ 
		Connection conn = null;
		PreparedStatement stmt = null;
		ResultSet rs = null;
		
		try {
			conn = JDBCUtil.getConnection();
			
			// JDBC 3ë‹¨ê³„ : Statement ìƒì„±
			String sql = "select * from student";
			stmt = conn.prepareStatement(sql);
			
			// JDBC 4ë‹¨ê³„ : SQL ì „ì†¡
			rs = stmt.executeQuery();
			
			// JDBC 5ë‹¨ê³„ : ì¡°íšŒ ê²°ê³¼ ì‚¬ìš©
			System.out.println("[ STUDENT ëª©ë¡ ]");
			rs.next();
			System.out.print(rs.getString("STUDENT_NO") + " : ");
			System.out.print(rs.getString("NAME") + " : ");
			System.out.print(rs.getInt("SCORE") + " : ");
			System.out.println(rs.getString("MAJOR"));

		} catch (SQLException e) {
			e.printStackTrace();
		} finally {
			JDBCUtil.close(rs, stmt, conn);
		}
	}
}
```

# 4. **DAO(Data Access Object) íŒ¨í„´ ì ìš©**

JDBC í”„ë¡œê·¸ë¨ì€ ì ˆì°¨ê°€ ë„ˆë¬´ ì¥í™©í•˜ê³  ë³µì¡í•˜ê¸° ë•Œë¬¸ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ ì•Œê³ ë¦¬ì¦˜ì— ì§‘ì¤‘í•˜ê¸°ê°€ ì–´ë µê²Œ ë§Œë“ ë‹¤. ì´ë¥¼ ê°„ëµí•˜ê²Œ ë§Œë“¤ê¸°ìœ„í•œ íŒ¨í„´ì´ DAO íŒ¨í„´ì´ë‹¤.

**1) DAO í´ë˜ìŠ¤**

```java
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class StudentDAO {
	// JDBC ê´€ë ¨ ë³€ìˆ˜ 
	private Connection conn = null;
	private PreparedStatement stmt = null;
	private ResultSet rs = null;
	
	// STUDENT í…Œì´ë¸” ê´€ë ¨ SQL ëª…ë ¹ì–´
	private String STUDENT_LIST = "select * from student";
	
	// STUDENT í…Œì´ë¸” ê´€ë ¨ CRUD ë©”ì†Œë“œ
	// í•™ìƒ ëª©ë¡ ì¡°íšŒ
	public void getStudentList() {
		try {
			conn = JDBCUtil.getConnection();
			stmt = conn.prepareStatement(STUDENT_LIST);
			rs = stmt.executeQuery();
			System.out.println("[ STUDENT ëª©ë¡ ]");
			while(rs.next()) {
				System.out.print(rs.getString("STUDENT_NO") + " : ");
				System.out.print(rs.getString("NAME") + " : ");
				System.out.print(rs.getInt("SCORE") + " : ");
				System.out.println(rs.getString("MAJOR"));
			}
		} catch (SQLException e) {
			e.printStackTrace();
		} finally {
			JDBCUtil.close(rs, stmt, conn);
		}
	}
}
```

ì´ì œ ì‘ì„±ëœ StudentDAO í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ í•™ìƒ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” SelectTest.java íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ê³  ì‹¤í–‰ ê²°ê³¼ë¥¼ í™•ì¸í•œë‹¤

```java
public class SelectTest3 {

	public static void main(String[] args) {
		// 1. StudentDAO ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
		StudentDAO dao = new StudentDAO();
		
		// 2. ëª©ë¡ì„ ì¡°íšŒí•œë‹¤. 
		dao.getStudentList();
	}
}
```

ë§ë„ ì•ˆë˜ê²Œ ê°€ë²¼ì›Œì§„ ì½”ë“œë¥¼ ë³¼ ìˆ˜ìˆë‹¤. 

ì´ì™€ ê°™ì´ INSERT,DELETE, UPDATEë„ ì§„í–‰í•´ ì£¼ë©´ ëœë‹¤.

# AOP ( Aspect Oriented Programing)

## AOP κ°μ”

- κ΄€μ‹¬μ§€ν–¥ ν”„λ΅κ·Έλλ°μ΄λΌκ³  ν•λ‹¤.
- λ†’μ€ μ‘μ§‘λ„λ¥Ό μ μ§€ν•λ” λ° λ„μ›€μ„ μ¤€λ‹¤.

μ¥μ :

- λΉ„μ¦λ‹μ¤ λ΅μ§μ— μ§‘μ¤‘ν•  μ μλ‹¤.

## κ΄€μ‹¬ λ¶„λ¦¬

: ν΅λ¤ κ΄€μ‹¬κ³Ό ν•µμ‹¬κ΄€μ‹¬μ„ λ¶„λ¦¬ν•λ” κ²ƒμ„ λ§ν•λ‹¤.

- ν΅λ‹¨ κ΄€μ‹¬(Crosscutting Concerns)
    
    : λ§¤μ†λ“λ§λ‹¤ κ³µν†µμΌλ΅ λ“±μ¥ν•λ” μ½”λ“λ“¤μ„ λ§ν•λ‹¤.
    
    - XXXAdvice ν΄λμ¤κ°€ ν΅λ‹¨κ΄€μ‹¬ ν΄λμ¤λ‹¤.
- ν•µμ‹¬ κ΄€μ‹¬(Core Concerns)
    
    : μ‚¬μ©μμ μ”μ²­μ— λ”°λΌ μ‹¤μ λ΅ μν–‰λλ” ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§μ„ λ§ν•λ‹¤.
    
    - XXXServicImpl ν΄λμ¤κ°€ λΉ„μ¦λ‹μ¤ ν΄λμ¤μ΄λ‹¤.

## AOP μ©μ–΄ μ •λ¦¬

- μ΅°μΈν¬μΈνΈ
    - ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν•λ” λ¨λ“  λΉ„μ¦λ‹μ¤ λ©”μ†λ“
- **ν¬μΈνΈμ»·**(Point Cut)
    - ν•„ν„°λ§λ μ΅°μΈν¬μΈνΈ(=λΉ„μ¦λ‹μ¤λ©”μ†λ“)
        
        <aside>
        π’΅ μ™ ν•„ν„°λ§ν•΄μ•Όν•λ”κ°€?
        
        - λ™μ‘μ„ ν•„μ”λ΅ ν•λ” κ³³μ—μ„λ§ λ™μ‘ν•κΈ° μ„ν•΄μ„
        
        </aside>
        
    - **Pointcut μ„¤μ •**
        
        ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a21589db-9b49-47ea-97ea-5429979f49b8/Untitled.png)
        
        **λ¦¬ν„΄ νƒ€μ… ν•„ν„°λ§**
        
        - ***** : λ¨λ“ λ¦¬ν„΄ νƒ€μ…μ„ ν—μ©ν•λ‹¤.
        - **void** : λ¦¬ν„΄ νƒ€μ…μ΄ voidμΈ λ©”μ†λ“λ§ ν•„ν„°λ§
        - **!void** : λ¦¬ν„΄ νƒ€μ…μ΄ voidκ°€ μ•„λ‹ λ©”μ†λ“λ§ ν•„ν„°λ§
        
        **ν¨ν‚¤μ§€ κ²½λ΅ ν•„ν„°λ§**
        
        - com.ssamz.biz.board : μ •ν™•ν•κ²com.ssamz.biz.boardμΈ ν¨ν‚¤μ§€λ¥Ό ν•„ν„°λ§ ν•λ‹¤.
        - com.ssamz.biz.. : com.ssamz.biz..λ΅ μ‹μ‘ν•λ” λ¨λ“  ν¨ν‚¤μ§€λ¥Ό ν•„ν„°λ§ ν•λ‹¤.
        - com.ssamz.biz..board : com.ssamz.bizλ΅ μ‹μ‘ν•λ” λ¨λ“  ν¨ν‚¤μ§€ μ¤‘μ—μ„ ν¨ν‚¤μ§€ λ§μ§€λ§‰μ΄ board μΈ ν¨ν‚¤μ§€λ¥Ό ν•„ν„°λ§ ν•λ‹¤.
        
        **ν΄λμ¤ μ΄λ¦„ ν•„ν„°λ§**
        
        - BoardServiceImpl : BoardServiceImpl  ν΄λμ¤λ¥Ό ν•„ν„°λ§ ν•λ‹¤.
        - *Impl : ν΄λμ¤ μ΄λ¦„μ΄ Implλ΅ λλ‚λ” λ¨λ“  ν΄λμ¤(XXXImpl)
        
        **λ©”μ†λ“ μ΄λ¦„ ν•„ν„°λ§**
        
        - getBoardList: μ΄λ¦„μ΄ getBoardListμΈ λ©”μ„λ“
        - get*: μ΄λ¦„μ΄ getμΌλ΅ μ‹μ‘ν•λ” λ¨λ“  λ©”μ„λ“(get() λ„ ν¬ν•¨)
        
        **λ§¤κ² λ³€μ ν•„ν„°λ§**
        
        - (..): λ¨λ“  κ²½μ°μ λ§¤κ²λ³€μμ  κ°―μμ™€ νƒ€μ…μ„ ν—μ©ν•λ‹¤.
    
- **μ–΄λ“λ°”μ΄μ¤**(Advice)
    - ν΅λ‹¨ κ΄€μ‹¬μ— ν•΄λ‹Ήν•λ” κ³µν†µ κΈ°λ¥μ μ½”λ“ (λλ” κ°€μ§€κ³  μλ” λ©”μ„λ“)
    - μ–΄λ“λ°”μ΄μ¤ λ™μ‘ μ‹μ μ„ 5κ°€μ§€λ΅ μ§€μ •ν•  μ μλ‹¤.
        - **before** : λ™μ‘ μ „
        - **after**: λ™μ‘ ν›„
            - λΉ„μ¦λ‹μ¤λ©”μ„λ“λ¥Ό λ°›μ„ μ μ—†λ‹¤.(returnμ΄ μ•λκΈ°λ•λ¬Έ)
        - **after-returning** : λΉ„μ¦λ‹μ¤ λ©”μ†λ“κ°€μ„±κ³µμ μΌλ΅ λ°ν™λλ©΄ λ™μ‘
            - retunringμ†μ„±μ„ κ°€μ§ μ μλ‹¤.
            - return κ°’μ„ λ°›μ„ μ μλ‹¤.
        - **after-throwing**: λΉ„μ¦λ‹μ¤ λ©”μ†λ“κ°€ μ‹¤ν–‰ μ¤‘ μμ™Έκ°€ λ°μƒν•λ©΄ λ™μ‘
            - μμ™Έκ°€ λ°μƒλ ν›„μ— λ™μ‘ν•μ—¬ try catchλ¬Έ λ‚¨λ°μ„ λ§‰μ„μμλ‹¤.
            - throwingμ†μ„±μ„ κ°€μ§ μ μλ‹¤.
        - **around** : Aroundλ” λ©”μ†λ“ νΈμ¶ μμ²΄λ¥Ό κ°€λ΅μ±„ λΉ„μ¦λ‹μ¤ λ©”μ†λ“ μ‹¤ν–‰ μ „ν›„μ— μ²λ¦¬ν•  λ΅μ§μ„ μ‚½μ…ν•  μ μμ
            - servletμ ν•„ν„°μ™€ λΉ„μ·ν•λ‹¤.
            - beforeμ™€ afterμ„ λ™μ‹μ— μ‚¬μ©ν•΄μ•Ό ν•  λ• μ‚¬μ©ν•λ‹¤.
            
            ```java
            import org.aspectj.lang.ProceedingJoinPoint;
            
            public class AroundAdvice {
            
            	//return νƒ€μ…μ΄ Objectμ—¬μ•Όν•λ‹¤.
            	
            	public Object aroundLog(ProceedingJoinPoint jp) throws Throwable {
            		Object returnObj = null;
            		
            		//Before λ΅μ§ μ‹¤ν–‰
            		System.out.println("---[Before Logic]---");
            		
            		// λ©”μ†λ“ νΈμ¶
            		returnObj =jp.proceed();
            		
            		//After λ΅μ§ μ‹¤ν–‰
            		System.out.println("---[After Logic]---");
            		
            		return returnObj;
            		
            	}
            }
            ```
            
    
- μ„λΉ™
    - ν¬μΈνΈμ»·μΌλ΅ μ§€μ •ν• ν•µμ‹¬ κ΄€μ‹¬ λ©”μ†λ“κ°€ νΈμ¶λ  λ•, μ–΄λ“λ°”μ΄μ¤μ— ν•΄λ‹Ήν•λ” ν΅λ‹¨κ΄€μ‹¬ λ©”μ†λ“κ°€ μ‚½μ…λλ” κ³Όμ •μ„ μλ―Έν•λ‹¤.
    
- **Aspect**(Pointcut+advice) λλ” **Advisor**
    - ν¬μΈνΈμ»·κ³Ό μ–΄λ“λ°”μ΄μ¤μ κ²°ν•©
    - μ• μ¤ν©νΈ μ„¤μ •μ— λ”°λΌ AOPμ λ™μ‘ λ°©μ‹μ΄ κ²°μ •